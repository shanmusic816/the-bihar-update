<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Cricket Score | The Bihar Update</title>

<style>
body{
    margin:0;
    font-family:Arial, Helvetica, sans-serif;
    background:url("https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?auto=format&fit=crop&w=1400&q=80") no-repeat center center/cover;
    color:white;
}
.overlay{
    background:rgba(0,0,0,0.85);
    min-height:100vh;
}
header{
    display:flex;
    justify-content:space-between;
    padding:15px 40px;
    background:rgba(0,0,0,0.6);
}
header a{
    color:white;
    text-decoration:none;
    margin-left:20px;
}
.container{
    max-width:900px;
    margin:60px auto;
    background:rgba(15,15,25,0.95);
    border-radius:20px;
    padding:30px;
    box-shadow:0 0 40px rgba(255,0,0,0.4);
}
.live-tag{
    color:red;
    font-weight:bold;
    float:right;
}
.match-title{
    font-size:22px;
    margin-bottom:20px;
}
.score{
    display:flex;
    justify-content:space-between;
    font-size:28px;
    margin:10px 0;
}
.details{
    margin-top:20px;
    font-size:18px;
    color:#ccc;
}
.no-match{
    text-align:center;
    font-size:22px;
    margin:40px 0;
}
.clock{
    text-align:right;
    font-size:14px;
    margin-top:20px;
    color:#aaa;
}
.watch-btn{
    display:inline-block;
    margin-top:20px;
    padding:10px 20px;
    background:red;
    color:white;
    border-radius:6px;
    text-decoration:none;
}
.flash{
    animation:flash 0.6s ease-in-out;
}
@keyframes flash{
    0%{background:yellow;color:black;}
    100%{background:none;color:white;}
}
</style>
</head>

<body>
<div class="overlay">

<header>
    <div><strong>THE BIHAR UPDATE</strong></div>
    <div>
        <a href="/">Home</a>
        <a href="/about.html">About</a>
        <a href="/contact.html">Contact</a>
    </div>
</header>

<div class="container">

<h2>Match Center <span class="live-tag">LIVE</span></h2>

<div id="content">
    <div class="no-match">Loading Match...</div>
</div>

<div class="clock" id="clock"></div>

</div>
</div>

<script>
const API_KEY = "0d1e4d24-19c5-45b4-836a-d9687476177a";

let lastScore1 = "";
let lastScore2 = "";

function updateClock(){
    const now = new Date();
    document.getElementById("clock").innerText =
        "Last Updated: " + now.toLocaleTimeString();
}
setInterval(updateClock,1000);
updateClock();

async function fetchMatch(){
    try{
        const res = await fetch(`https://api.cricapi.com/v1/currentMatches?apikey=${API_KEY}&offset=0`);
        const data = await res.json();

        if(!data.data){
            document.getElementById("content").innerHTML =
                `<div class="no-match">No Live Match Right Now<br>
                <div style="font-size:14px;margin-top:10px;color:#aaa;">
                Live updates will appear automatically.
                </div></div>`;
            return;
        }

        const liveMatch = data.data.find(match => match.matchStarted === true);

        if(!liveMatch){
            document.getElementById("content").innerHTML =
                `<div class="no-match">No Live Match Right Now<br>
                <div style="font-size:14px;margin-top:10px;color:#aaa;">
                Live updates will appear automatically.
                </div></div>`;
            return;
        }

        const team1 = liveMatch.teams[0];
        const team2 = liveMatch.teams[1];

        const score1 = liveMatch.score[0] ? 
            `${liveMatch.score[0].r}/${liveMatch.score[0].w} (${liveMatch.score[0].o})`
            : "-";

        const score2 = liveMatch.score[1] ? 
            `${liveMatch.score[1].r}/${liveMatch.score[1].w} (${liveMatch.score[1].o})`
            : "-";

        let requiredRuns = "";
        if(liveMatch.score.length > 1){
            const target = liveMatch.score[0].r + 1;
            const current = liveMatch.score[1].r;
            const need = target - current;
            if(need > 0){
                requiredRuns = `${team2} need ${need} runs to win`;
            }
        }

        let flashClass1 = (score1 !== lastScore1) ? "flash" : "";
        let flashClass2 = (score2 !== lastScore2) ? "flash" : "";

        lastScore1 = score1;
        lastScore2 = score2;

        document.getElementById("content").innerHTML = `
            <div class="match-title">${liveMatch.name}</div>

            <div class="score ${flashClass1}">
                <div>${team1}</div>
                <div>${score1}</div>
            </div>

            <div class="score ${flashClass2}">
                <div>${team2}</div>
                <div>${score2}</div>
            </div>

            <div class="details">${requiredRuns}</div>

            <a class="watch-btn" href="#" target="_blank">
            Watch Live on Official Broadcaster
            </a>
        `;

    }catch(e){
        document.getElementById("content").innerHTML =
            `<div class="no-match">API Error<br>
            <div style="font-size:14px;margin-top:10px;color:#aaa;">
            Please check API key or limit.
            </div></div>`;
    }
}

fetchMatch();
setInterval(fetchMatch,90000); // 30 sec refresh
</script>

</body>
</html>
